# 조인이란

**조인(join)** 은 여러 테이블을 합쳐 원하는 데이터를 얻는 작업 뜻한다. 테이블을 하나로 합치려면 각 테이블에서 공통된 열을 이용.. 원하는 결과 데이터를 얻으려면 어떤 조인 연산 수행, 조건을 무엇으로 할지 고민.

조인은 결과에 포함되는 테이블의 범주에 따라 크게 내부 조인, 외부 조인으로 구분.

---

SQL에서 조인 연산을 할 때 다음과 같은 다양한 연산자를 함께 사용할 수 있다.

- **ON**  
조인 연산에 ㄷ해나 조건절을 작성할 때 사용하는 연산자, 각 테이블에서 어떠한 속성을 사용해 연산 수행할지 나타냄
- **USING**  
조인 연산을 하려는 테이블에서 속성명이 동일할 때 `USING` 연산자 뒤에 공통되는 속성명만 작성해 조건을 간단하게 적을 수 있다.
- **WHERE**  
테이블에서 원하는 데이터를 조회하기 위한 조건절을 작성할 때 사용하는 연산자.  
조건절에 비교 연산자, `IN` 연산자, BETWEEN 연산자 등을 사용해 원하는 데이터를 얻을 수 있다.
- **IN**  
 WHERE 절과 함께 사용, `IN` 연산자 뒤에 나오는 조건에 하나라도 해당하는 값을 검색할 수 있음.
- **BETWEEN**  
특정 범위에 속하는 데이터를 조회할 때 사용하는 연산자. >, < 처럼 값을 비교하는데 사용
- **LIKE**  
특정 데이터를 조회할 때 사용하는 연산자로, % 또는 _와 함께 사용.  
%는 길이를 알수 없는 문자를, _는 문자 하나를 의미하여 특정 길이의 문자를 검색할 때 사용.

---

# 내부 조인

**내부 조인(INNER JOOIN)** 은 2개 이상의 테이블에서 **공통 속성을 가진 데이터를 검색하기 위한 연산.**  
테이블 2개에서 내부 조인 수행하는 SQL 문의 형식

---

```sql
SELECT [조회하려는 열]
	FROM [테이블 1] INNER JOIN [테이블 2]
		ON [조인에 대한 조건]
```

---

예를 들어, 학번, 이름, 전공이 저장된 ‘학생 전공 테이블’과, 학번과 동아리가 저장된 ‘학생 동아리 테이블’이 있다

| 학번 | 이름 | 전공 |
| --- | --- | --- |
| 2024111111 | 김XX | 컴퓨터공학 |
| 2024222222 | 이XX | 전자공학 |
| 2024333333 | 최XX | 국어국문 |
| 2024444444 | 박XX | 기계공학 |

| 학번 | 동아리 |
| --- | --- |
| 2024111111 | 해킹동아리 |
| 2024222222 | 독서 |
| 2024444444 | 물리동아리 |

학생별 가입 동아리를 확인하고 싶다면 두 테이블로 조인 연산을 구행. 이때 두 테이블에서 공통되는 열인 학번을 이용해 연산 수행.

---

```sql
SELECT *
	FROM 학생 전공 테이블 INNER JOIN 학생 동아리 테이블
		ON 학생 전공 테이블.학번 = 학생 동아리 테이블.학번
```

---

결과 다음 같이 두 테이블에서 학번 동일한 튜플만 모아 조회.  
따라서(2024333333, 최XX, 국어국문) 튜플은 학생 동아리 테이블에 학번이 존재하지 않으므로 결과 테이블에 조회되지 않음

| 학번 | 이름 | 전공 | 동아리 |
| --- | --- | --- | --- |
| 2024111111 | 김XX | 컴퓨터공학 | 해킹동아리 |
| 2024222222 | 이XX | 전자공학 | 독서 |
| 2024444444 | 박XX | 기계공학 | 물리동아리 |

---

**명사적 조인 표현**  
앞에서처럼 `JOIN` 연산자 뒤에 조인할 테이블을 명시적으로 표현하는 방법.

**암시적 조인 표현**  
다음 형식처럼 `JOIN` 연산자를 명시하지 않고 `FROM` 절 뒤에 조인할 테이블만 나열하는 방법.

---

```sql
SELECT [얻으려는 열]
	FROM [테이블1], [테이블2]
		ON [조인에 대한 조건]
```

---

# 외부 조인

**외부 조인(OUTER JOIN)** 이란 테이블에서 **조인 조건에 해당하는 속성 값이 없는 데이터까지 모두 조회하는 연산**. 이때 **존재하지 않는 데이터에 대해서는 NULL로 표기**  
외부 조인에 종류

- **왼쪽 외부 조인(LEFT OUTER JOIN)**  
연산자 왼쪽 테이블의 모두 데이터를 결과 테이블에 조회.  
조건을 만족하는 튜플이 왼쪽 테이블에만 이속 오른쪽 테이블에는 존재하지 않아도 결과 테이블에 조회.
- **오른쪽 외부 조인(RIGHT OUTER JOIN)**  
연산자 오른쪽 테이블의 모든 데이터를 결과 테이블에 조회.  
조건 만족하는 튜플이 오른쪽 테이블에만 있고 왼쪽 테이블에는 존재하지 않아도 결과 테이블에 조회.
- **완전 외부 조인(FULL OUTER JOIN)**  
양쪽 테이블에서 조건을 만족하지 않는 데이터가 있더라도 모두 포함해 결과 테이블에 조회

외부 조인을 수행하는 SQL 문의 형식은 다음과 같다.  
내부 조인과 동일하게 `JOIN` 연산자로 조인을 수행하기 위해 테이블을 나열, 이 때 `LEFT`, `RIGHT`, `FULL` 중 하나 골라야 한다. `ON` 조건절에는 조인 연산 대한 조건 작성.

---

```sql
SELECT [조회하려는 열]
	FROM [테이블1] [LEFT|RIGHT|FULL] OUTER JOIN [테이블2]
		ON [조인에 대한 조건]
```

---

테이블로 왼쪽 외부 조인 수행하려면 SQL 다음과 같이 입력

---

```sql
SELECT *
	FROM 학생 전공 테이블 LEFT OUTER JOIN 학생 동아리 테이블
		ON 학생 전공 테이블.학번 = 학생 동아리 테이블.학번
```

---

외부 조인 결과

| 학번 | 이름 | 전공 | 동아리 |
| --- | --- | --- | --- |
| 2024111111 | 김XX | 컴퓨터공학 | 해킹동아리 |
| 2024222222 | 이XX | 전자공학 | 독서 |
| 2024333333 | 최XX | 국어국문 | NULL |
| 2024444444 | 박XX | 기계공학 | 물리동아리 |

내부 조인과 달리 왼쪽 외부 조인은 왼쪽 테이브르이 모든 튜플을 포함.  
따라서 오른쪽 테이블에 존재하지 않는 튜플(2024333333, 최XX, 국어국문)도 출력.  
단, 동아리에 대한 값은 존재하지 않으므로 NULL 표기

---

### 교차 조인과 셀프 조인

**교차 조인(CROSS JOIN)**

카티션 곱(cartesian product)이라고도 하는 교차 조인은 각 테이블의 행과 다른 테이블의 모든 행 결합해 결과 테이블을 생성. 조인에 대한 조건 없어서 모든 행이 결합된다고 보면 된다.  
예를 들어, m개 행을 가진 테이블과 n개 행을 가진 테이블에 교차 조인을 수행 m * n 행을 가진 결과 테이블 만들어짐

---

```sql
SELECT *
	FROM [테이블1] CROSS JOIN [테이블2]
```

---

**셀프 조인(SELF JOIN)**

셀프 조인은 한 테이블이 자기 자신과 조인 연산을 수행하는 것.  
SQL 문에서 셀프 조인을 하려면 FROM 절에 같은 테이블을 2번 적어야 한다. 이때 테이블을 구부하기 위해 별칭 사용

---

```sql
SELECT *
	FROM [테이블1] [별칭1], [테이블2] [별칭2]
 WHERE [별칭1의 열과 별칭2의 열에 대한 검색 조건]
```

---